var navSubMinWidth, navSubWrapMinWidth, navSubTitleMinWidth, iScrollPos = 0, mobileNavTrip = 0, navTopMinWidth = $("#top-nav-wrap").width(), extraPadding = 75, subNavPos = 0, foundationMobileWidth = 640, subDDWiddth = 285; function addnavclasses() { /Edge\/\d./i.test(navigator.userAgent) ? $("html").addClass("ms-edge") : window.MSInputMethodContext && document.documentMode ? $("html").addClass("ie11") : -1 !== navigator.appVersion.indexOf("MSIE 10") ? $("html").addClass("ie10") : -1 !== navigator.appVersion.indexOf("MSIE 9") ? $("html").addClass("ie9") : -1 !== navigator.userAgent.indexOf("Safari") && -1 == navigator.userAgent.indexOf("Chrome") ? $("html").addClass("safari") : navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && $("html").addClass("firefox"), navigator.userAgent.toLowerCase().indexOf("android") > -1 && $("html").addClass("android"), navigator.userAgent.toLowerCase().match(/(ipod|iphone|ipad)/) && $("html").addClass("ios"), $("html").hasClass("ie11") && document.body.addEventListener("mousewheel", function () { event.preventDefault(); var a = event.wheelDelta, e = window.pageYOffset; window.scrollTo(0, e - a) }), $(".feature-slider:not(.body-copy)").length && $("html").addClass("has-slider"), $(".row-wrap.widget.hc").length && $("html").addClass("has-slider"), $("#sub-nav-wrap ul.sub-nav li").length && $("html").addClass("has-sub-nav"), $("#main-buttons-ul").length && $("html").addClass("has-main-buttons-ul"), ($("#hc-links-wrap").length || $("#hc-secondary-links-wrap").length) && $("html").addClass("has-hc-links-wrap"), $("#sub-nav-vertical-wrap").length && $("html").addClass("is-sub-page"), $(".secondary-content-block").length && $("html").addClass("is-secondary-page"), $(".no-js").removeClass("no-js"); var a = 14; if ($("html").hasClass("hc") ? a = 14 : $("html").hasClass("childrens") && (a = 52), $("#dept-name").length && !$("html").hasClass("is-secondary-page") && $("html").hasClass("has-main-buttons-ul") ? $("#header-spacer").css("height", $("#dept-name").height() - 18 + "px") : $("html").hasClass("is-secondary-page") && !$("html").hasClass("has-hc-links-wrap") && $("#dept-name").height() > 56 && $("#header-spacer").css("height", $("#dept-name").height() - 54 + a + "px"), $("#hc-secondary-links-wrap").length && $("html").hasClass("is-secondary-page") && !$("html").hasClass("has-slider") && $("#dept-name").height() > 56 && $("#hc-secondary-links-wrap").css("padding-top", $("#dept-name").height() + 46 + "px"), $("html").hasClass("childrens") && $(".title-row").length) { var e = ["green", "yellow", "purple"]; $(".title-row").each(function () { var a = e[Math.floor(Math.random() * e.length)]; $(this).addClass(a) }) } $("ul.menu.top-nav li ul").parent().children("a").addClass("has-subnav"), $("ul.menu.sub-nav li ul").parent().children("a").addClass("has-subnav"), $("ul.sub-nav-vertical li ul").parent().addClass("has-subnav") } function windowResized() { var a = 0, e = $("#logo-wrap").width(); $(window).width() < foundationMobileWidth ? $("#sub-nav-vertical-wrap").trigger("sticky_kit:detach") : $("#sub-nav-vertical-wrap").show(), $("html").hasClass("childrens") && $("html").hasClass("nav-overflow") && $("html").hasClass("dept-name-overflow") && ("/Childrens/Childrens-Home-Page.html" == window.location.pathname ? $("html").addClass("childrens-home") : $("#dept-name").removeClass("childrens-home")), $("#dept-name").length ? ($("html").hasClass("nav-overflow") || (navTopMinWidth = $("#top-nav-wrap").width() + 40, navSubMinWidth = $("ul.menu.sub-nav").width()), $(window).width() < 1200 && (navTopMinWidth + e + $("ul.menu.top-buttons").width() + extraPadding >= $(".header-wrap > .row").width() || e + navSubMinWidth + extraPadding >= $(".header-wrap > .row").width()) ? (0 == a && (a = 1), $("html").addClass("nav-overflow"), $(window).width() < 1200 && $("#logo-wrap").width() + $("#dept-name").width() + $("ul.menu.top-buttons").width() + 30 >= $(".header-wrap > .row").width() ? $("html").addClass("dept-name-overflow") : $("html").removeClass("dept-name-overflow")) : (a = 0, $("html").removeClass("nav-overflow"))) : ($("html").hasClass("nav-overflow") || (navTopMinWidth = $("#top-nav-wrap").width() + 40), $(window).width() < 1200 && navTopMinWidth + $("#logo-wrap").width() + $("ul.menu.top-buttons").width() + extraPadding >= $(".header-wrap > .row").width() ? (0 == a && (a = 1), $("html").addClass("nav-overflow")) : (a = 0, $("html").removeClass("nav-overflow"))), $("html").hasClass("nav-overflow") || ($("ul.menu.top-nav li a").removeClass("hoverli"), $("ul.menu.top-nav li > ul").hide(), $("ul.menu.top-nav a").blur(), $("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav li > ul").hide(), $("ul.menu.sub-nav a").blur()), $("html").hasClass("nav-overflow") ? ($("#header-spacer").css("height", "12px"), $("ul.menu.sub-nav li.currentPage > ul").show()) : $("html").hasClass("is-secondary-page") || $("#header-spacer").show(), $(".header-wrap").width() - $(".header-wrap > .row").width() < 2 * subDDWiddth && !$("html").hasClass("nav-overflow") ? $("html").addClass("no-room-4dd") : $("html").removeClass("no-room-4dd"), $(".timeline").length && $(".timeline").each(function () { if ($(this).hasClass("line-middle")) { var a = -1; $(this).find(".content-box").each(function () { a = a > $(this).height() ? a : $(this).height() }), $(this).find(".wrapper").css("min-height", 2.1 * a + 120 + $(window).height() / 10 + "px") } $(this).find(".wrapper").prop("scrollWidth") > $(this).width() ? $(this).find(".shadows").hasClass("active") || $(this).find(".shadows").addClass("active") : $(this).find(".shadows").removeClass("active") }) } function initUMMCjs() { $("#logo-wrap").width(), $("#top-nav-wrap").width(); $("html").hasClass("ie11") || $("html").hasClass("ie10") || $("html").hasClass("ie9") ? window.setTimeout(function () { continueInit(), windowResized() }, 1e3) : window.setTimeout(function () { continueInit(), windowResized() }, 50); $(window).on("resize webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange", function () { windowResized() }) } function continueInit() { var a = $("#logo-wrap").width(); navTopMinWidth = $("#top-nav-wrap").width(), $("#main-buttons-wrap").length ? $(window).scrollTop() >= $("#main-buttons-wrap").position().top && $("html").addClass("scrolled-past-main-buttons") : $("html").addClass("scrolled-past-main-buttons"), $(".menu.alpha").length && ($(window).scrollTop() >= $(".menu.alpha").position().top ? $("html").addClass("scrolled-past-menu-alpha") : $("html").removeClass("scrolled-past-menu-alpha")), $(".sub-nav-vertical").length && $(".sub-nav-vertical li.currentPage").parentsUntil(".sub-nav-vertical").addClass("currentPage"), $("#dept-name").length ? $(window).width() < 1200 && (navSubMinWidth = $("ul.menu.sub-nav").width(), navSubWrapMinWidth = $("#sub-nav-wrap").width(), navSubTitleMinWidth = $("#sub-nav-title-wrap").width(), ($("#top-nav-wrap").width() + $("#logo-wrap").width() + $("ul.menu.top-buttons").width() + extraPadding >= $(".header-wrap > .row").width() && 0 == mobileNavTrip || a + $("ul.menu.sub-nav").width() + extraPadding >= $("#sub-nav-wrap").width() && 0 == mobileNavTrip) && ($("html").addClass("nav-overflow"), mobileNavTrip = 1, $("#logo-wrap").width() + $("#dept-name").width() + $("ul.menu.top-buttons").width() + extraPadding >= $(".header-wrap > .row").width() && $("html").addClass("dept-name-overflow"))) : $(window).width() < 1200 && $("#top-nav-wrap").width() + a + $("ul.menu.top-buttons").width() + extraPadding >= $(".header-wrap > .row").width() && 0 == mobileNavTrip && (navTopMinWidth = $("#top-nav-wrap").width(), $("html").addClass("nav-overflow"), mobileNavTrip = 1), $(".header-wrap").width() - $(".header-wrap > .row").width() < 2 * subDDWiddth && !$("html").hasClass("nav-overflow") && $("html").addClass("no-room-4dd"), $("html").hasClass("nav-overflow") && $("#header-spacer").css("height", "12px"), $(document).on("click", "#main-buttons-ul > li div *", "#main-buttons-ul > li div", function (a) { a.stopPropagation() }), $(document).on("click", "#main-buttons-ul > li div a", function (a) { $("#main-buttons-ul > li").removeClass("hoverli down up") }), $(document).on("click", ".nav-header", function (a) { $("#main-buttons-ul > li").removeClass("hoverli down up"), $(".teaser-flyout").removeClass("disabled") }), $(document).on("click", "#main-buttons-ul > li:not(.direct-link)", function (a) { if ($(this).css("animation", "none"), a.stopPropagation(), $("#search-popup-wrap").addClass("hideSearch"), $(".nav-button-li.search > button").removeClass("isActive"), $("html").removeClass("slider-on"), $("ul.menu.top-nav > li ul").hide(), $("ul.menu.top-nav li a").removeClass("hoverli"), $("ul.menu.top-nav a").blur(), $("ul.menu.top-nav > li ul").slideUp(160), $("ul.menu.sub-nav > li ul").hide(), $("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav a").blur(), $("ul.menu.sub-nav > li ul").slideUp(160), $(this).removeClass("down up"), $(this).siblings().removeClass("hoverli down up"), extraPadding = $("html").hasClass("is-sub-page") ? 70 : 20, $(this).toggleClass("hoverli"), $(this).hasClass("hoverli")) { $(".teaser-flyout").addClass("disabled"); var e = 0; $("#dept-name").length && (e = $("#dept-name").height()), $(this).find("div.flyout").height() + $(".header-wrap").height() + e + extraPadding < $("#main-buttons-wrap").offset().top - $(window).scrollTop() ? $(this).addClass("up") : ($(this).addClass("down"), TweenLite.to(window, .3, { scrollTo: { y: "#main-buttons-wrap", offsetY: 50 }, delay: .12, ease: Power1.easeInOut })) } else $(".teaser-flyout").removeClass("disabled") }), $(document).on("click", "#main-buttons-ul > li:not(.direct-link) .teaser-flyout *", function (a) { if ($(this).closest("li").css("animation", "none"), a.stopPropagation(), $("#search-popup-wrap").addClass("hideSearch"), $(".nav-button-li.search > button").removeClass("isActive"), $("html").removeClass("slider-on"), $("ul.menu.top-nav > li ul").hide(), $("ul.menu.top-nav li a").removeClass("hoverli"), $("ul.menu.top-nav a").blur(), $("ul.menu.top-nav > li ul").slideUp(160), $("ul.menu.sub-nav > li ul").hide(), $("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav a").blur(), $("ul.menu.sub-nav > li ul").slideUp(160), $(this).closest("li").removeClass("down up"), $(this).closest("li").siblings().removeClass("hoverli down up"), extraPadding = $("html").hasClass("is-sub-page") ? 70 : 20, $(this).closest("li").toggleClass("hoverli"), $(this).closest("li").hasClass("hoverli")) { $(".teaser-flyout").addClass("disabled"); var e = 0; $("#dept-name").length && (e = $("#dept-name").height()), $(this).closest("li").find("div.flyout").height() + $(".header-wrap").height() + e + extraPadding < $("#main-buttons-wrap").offset().top - $(window).scrollTop() ? $(this).closest("li").addClass("up") : ($(this).closest("li").addClass("down"), TweenLite.to(window, .3, { scrollTo: { y: "#main-buttons-wrap", offsetY: 50 }, delay: .12, ease: Power1.easeInOut })) } }), $(document).on("mouseover", "#main-buttons-ul > li:not(.hoverli)", function (a) { extraPadding = $("html").hasClass("is-sub-page") ? 70 : 20, $(this).find(".teaser-flyout").height() + $(".header-wrap").height() + $("#dept-name").height() + extraPadding >= $("#main-buttons-wrap").offset().top - $(window).scrollTop() ? $(this).closest("li").addClass("down") : $(this).closest("li").removeClass("down") }), $(document).on("click", ".nav-button-li.search > button", function (a) { a.stopPropagation(), $("html").hasClass("nav-overflow") ? ($("#main-buttons-ul > li").removeClass("hoverli"), $(".nav-button-li.search > button").removeClass("isActive"), $("html").hasClass("slider-on") ? $(".siteSearch").focus() : ($("html").addClass("slider-on"), $("html").hasClass("ompw") || $(".siteSearch").focus())) : ($("#main-buttons-ul > li").removeClass("hoverli"), $("html").removeClass("slider-on"), $("ul.menu.top-nav li a").removeClass("hoverli"), $("ul.menu.top-nav a").blur(), $("ul.menu.top-nav > li ul").slideUp(160), $("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav a").blur(), $("ul.menu.sub-nav > li ul").slideUp(160), $("#search-popup-wrap").toggleClass("hideSearch"), $(this).toggleClass("isActive"), $(".siteSearch").focus()) }), $(".panel.animate").length && ($(".panel.animate").children("div").each(function (a) { $(this).css("transition-delay", 40 * a + "ms") }), $(".panel.animate").on("inview", function (a, e) { 1 == e ? ($(this).addClass("is-seen"), $(this).children("div").fadeTo(180, 1)) : null != e ? $(this).hasClass("loading") : $(this).removeClass("loading") }), $(".panel.animate").trigger("inview")), $(".widget.promo.animate").length && ($(".widget.promo.animate").each(function (a) { $(this).css("transition-delay", 70 * a + 120 + "ms") }), $(".widget.promo.animate").on("inview", function (a, e) { 1 == e ? ($(".widget.promo.animate").addClass("is-seen"), $(this).fadeTo(500, 1)) : null != e ? $(this).hasClass("loading") || ($(this).removeClass("is-seen"), $(this).fadeTo(100, 0)) : $(this).removeClass("loading") }), $(".widget.promo.animate").trigger("inview")), $(".widget.text").length && $(".body-copy .widget.text img").each(function (a) { if (!$(this).parent("a").length && !$(this).parents(".slider-item").length && !$(this).parents(".SecureForm").length) { var e = $(this).attr("alt"); null == e && (e = ""), $(this).wrap('<a href="' + $(this).attr("src") + '" class="fancy-img" data-caption="' + e + '"></a>') } }), $(".secondary-content-block") && ($(".secondary-content-block .widget.text img").each(function (a) { if (!$(this).parent("a").length && !$(this).parents(".slider-item").length && !$(this).parents(".SecureForm").length) { var e = $(this).attr("alt"); null == e && (e = ""), $(this).wrap('<a href="' + $(this).attr("src") + '" class="fancy-img" data-caption="' + e + '"></a>') } }), $("a.fancy-img").fancybox({})), $(window).scroll(function () { $("html").hasClass("nav-overflow") || ($("ul.menu.top-nav > li ul").slideUp(160), $("ul.menu.top-nav li a").removeClass("hoverli"), $("ul.menu.top-nav a").blur(), $("ul.menu.sub-nav > li ul").slideUp(160), $("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav a").blur()), $("#main-buttons-wrap").length ? $(window).scrollTop() >= $("#main-buttons-wrap").position().top ? $("html").addClass("scrolled-past-main-buttons") : $("html").removeClass("scrolled-past-main-buttons") : $("html").addClass("scrolled-past-main-buttons"), $(".menu.alpha").length && ($(window).scrollTop() >= $(".menu.alpha").position().top ? $("html").addClass("scrolled-past-menu-alpha") : $("html").removeClass("scrolled-past-menu-alpha")), $(window).scrollTop() > 200 ? $("html").addClass("scrolled-past-hero") : $("html").removeClass("scrolled-past-hero"), $(window).scrollTop() <= iScrollPos ? $("html").addClass("scrolled-up") : $("html").removeClass("scrolled-up"), iScrollPos = $(window).scrollTop() }), $(document).click(function (a) { $(a.target).is("#main-buttons-ul > li div *", "#main-buttons-ul > li div") || ($("#main-buttons-ul > li").removeClass("hoverli down up"), $(".teaser-flyout").removeClass("disabled")), $(a.target).is("#search-popup-wrap > .menu *, #search-popup-wrap > .menu") || ($("#search-popup-wrap").addClass("hideSearch"), $(".nav-button-li.search > button").removeClass("isActive")), $(a.target).is("#top-nav-wrap *, #top-nav-wrap") || $("html").removeClass("slider-on"), $(a.target).is("ul.menu.top-nav *, ul.menu.top-nav") || ($("ul.menu.top-nav li a").removeClass("hoverli"), $("ul.menu.top-nav > li ul").hide(), $("html").hasClass("nav-overflow") && $("ul.menu.top-nav li.currentPage > ul").show()), $(a.target).is("ul.menu.sub-nav *, ul.menu.sub-nav") || ($("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav > li ul").hide(), $("html").hasClass("nav-overflow") && $("ul.menu.sub-nav li.currentPage > ul").show()) }), $(document).on("click", 'a[href="#"]', function (a) { $(this).parent().parent("#main-buttons-ul").length > 0 || (a.stopPropagation(), a.preventDefault()) }), $(document).on("click", ".nav-button-li.hamburger > button", function (a) { a.stopPropagation(), $("#main-buttons-ul > li").removeClass("hoverli"), $("#search-popup-wrap").addClass("hideSearch"), $("#search-popup-wrap").addClass("hideSearch"), $(".nav-button-li.search > button").removeClass("isActive"), $("html").toggleClass("slider-on") && $(".nav-button-li.hamburger > button").blur() }), $(document).on("click", "ul.menu.top-nav li a", function (a) { $("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav a").blur(), $("ul.menu.sub-nav > li ul").hide(), $("#main-buttons-ul > li").removeClass("hoverli down up"), $(".teaser-flyout").removeClass("disabled"), $(this).parents().eq(1).find("li > a").removeClass("hoverli"), $(this).hasClass("has-subnav") && (a.preventDefault(), a.stopPropagation(), $("html").hasClass("nav-overflow") ? $(this).parents().eq(1).find("li > ul").slideUp(140) : $(this).parents().eq(1).find("li > ul").hide(), $(this).toggleClass("hoverli"), $(this).parent().children("ul").slideToggle(140), $("#search-popup-wrap").addClass("hideSearch"), $(".nav-button-li.search > button").removeClass("isActive")) }), $(document).on("click", "ul.menu.sub-nav li a", function (a) { subNavPos = $(window).scrollTop(), $("ul.menu.top-nav li a").removeClass("hoverli"), $("ul.menu.top-nav a").blur(), $("ul.menu.top-nav > li ul").hide(), $("#main-buttons-ul > li").removeClass("hoverli down up"), $(".teaser-flyout").removeClass("disabled"), $(this).parents().eq(1).find("li > a").removeClass("hoverli"), $(this).hasClass("has-subnav") && (a.preventDefault(), a.stopPropagation(), $("html").hasClass("nav-overflow") ? $(this).parents().eq(1).find("li > ul").slideUp(140) : $(this).parents().eq(1).find("li > ul").hide(), $(this).toggleClass("hoverli"), $(this).parent().children("ul").hasClass("col-2") || $(this).parent().children("ul").hasClass("col-3") || $(this).parent().children("ul").hasClass("col-4") ? $(this).parent().children("ul").toggle() : $(this).parent().children("ul").slideToggle(140), $("#search-popup-wrap").addClass("hideSearch"), $(".nav-button-li.search > button").removeClass("isActive")) }), $(document).on("click", "ul.sub-nav-vertical li a", function (a) { $("#main-buttons-ul > li").removeClass("hoverli down up"), $(".teaser-flyout").removeClass("disabled"), $("#search-popup-wrap").addClass("hideSearch"), $(".nav-button-li.search > button").removeClass("isActive"), $("ul.menu.sub-nav li a").removeClass("hoverli"), $("ul.menu.sub-nav > li ul").hide(), $(this).parents().eq(1).find("li").removeClass("currentPage"), $(this).parents().eq(1).find("li").removeClass("hoverli"), $(this).siblings("ul").length > 0 && (a.preventDefault(), a.stopPropagation(), $(this).parentsUntil(".sub-nav-vertical").siblings().find("ul:visible").slideUp(140, function () { $(document.body).trigger("sticky_kit:recalc") }), $(this).parent().toggleClass("hoverli"), $(this).parent().children("ul").slideToggle(140, function () { $(this).parent().children("ul").is(":hidden") && $(this).parent().removeClass("hoverli"), $(document.body).trigger("sticky_kit:recalc") })) }), $(document).on("click", "#top-nav-header", function (a) { a.preventDefault(), a.stopPropagation(), $("ul.menu.top-nav").slideToggle(140) }), $(document).on("click", ".secondary-content-block > .line-behind", function (a) { $(window).width() < foundationMobileWidth && $("#sub-nav-vertical-wrap").slideToggle(140) }), $("ul.menu.sub-nav li ul").each(function (a, e) { var s = $(this).children().length; s >= 8 && s < 14 ? $(e).addClass("col-2") : s >= 14 && s < 20 ? $(e).addClass("col-3") : s >= 20 && $(e).addClass("col-4") }) } $(document).ready(function () { addnavclasses(), initUMMCjs() }), $(document).on("AjaxComplete", function () { addnavclasses() });